package saobracaj;

public class Vozilo extends Akter {
	
	private String oznaka;
	private int kap, brPut = 0;
	private long minT, maxT, zadrzavanje;
	private int trStanica = 0; //trenutna stanica
	private int smer = 1; //smer kretanja
	private Stanica[] stanice; 
	
	public Vozilo(String o, int k, long min, long max, long z, Stanica[] s){ oznaka = o; kap = k; minT = min; maxT = max; zadrzavanje = z; stanice = s;}
	
	
	
	@Override
	public void radnja() {
		// TODO Auto-generated method stub
		try{
			//cekanje da stigne do stanice
			sleep((long)(minT + Math.random()*(maxT-minT)));
			//izlazak putnika
			brPut -= (int)brPut*Math.random();
			//cekanje da putnici udju u autobus
			sleep((long)zadrzavanje);
			//ulazak putnika u autobus
			if (stanice[trStanica].getBrPut() < kap - brPut){
				brPut += stanice[trStanica].getBrPut();
			}else{
				brPut = kap;
			}
			//promena sledece stanice
			if(trStanica == stanice.length){
				smer = -1;
			}
			if (trStanica == 0){
				smer = 1;
			}
			trStanica += smer;
		}catch(InterruptedException g){}
	}
	
	public String toString() { return oznaka + " ide ka stanici: " + stanice[trStanica] + ". Broj putnika: " + brPut; }

}
